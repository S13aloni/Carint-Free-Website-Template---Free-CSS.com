<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- jQuery and jQuery UI -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
    <style>
        th {
    cursor: grab;
    background: #007bff;
    color: white;
    padding: 10px;
    text-align: left;
}

th.ui-sortable-helper {
    background: #ff5733;
}

td {
    padding: 10px;
    text-align: left;
}

    </style>
    <script>
        $(document).ready(function () {
            var table = $("#myTable");
    
            // Make the table headers draggable
            $("thead tr").sortable({
                axis: "x", // Only allow horizontal dragging
                items: "th",
                cursor: "move",
                helper: function (e, ui) {
                    var clone = ui.clone();
                    clone.css("width", ui.width());
                    return clone;
                },
                start: function (event, ui) {
                    ui.item.data('start_index', ui.item.index()); // Store the original index of the dragged column
                },
                update: function (event, ui) {
                    var start_index = ui.item.data('start_index'); // Get original index
                    var new_index = ui.item.index(); // Get new index after dragging
    
                    // Move all table rows (tbody)
                    $("tbody tr").each(function () {
                        var row = $(this);
                        var cells = row.children("td"); 
                        var moving_cell = cells.eq(start_index); // Get dragged column's data cell
    
                        if (new_index > start_index) {
                            moving_cell.insertAfter(cells.eq(new_index)); // Move cell forward
                        } else {
                            moving_cell.insertBefore(cells.eq(new_index)); // Move cell backward
                        }
                    });
                }
            }).disableSelection();
        });
    </script>
    


</head>
<body>
    <table id="myTable" border="1">
        <thead>
            <tr>
                <th class="draggable">Name</th>
                <th class="draggable">Age</th>
                <th class="draggable">Email</th>
                <th class="draggable">City</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Alice</td>
                <td>25</td>
                <td>alice@example.com</td>
                <td>New York</td>
            </tr>
            <tr>
                <td>Bob</td>
                <td>30</td>
                <td>bob@example.com</td>
                <td>Los Angeles</td>
            </tr>
            <tr>
                <td>Charlie</td>
                <td>28</td>
                <td>charlie@example.com</td>
                <td>Chicago</td>
            </tr>
        </tbody>
    </table>
    
</body>
</html>